# TinyRetro - Copilot Instructions

## Project Overview

TinyRetro is a small sprint retrospective application built to learn Rust and Svelte. It features a Rust backend with Axum web framework and a SvelteKit frontend with SSR disabled for SPA behavior.

## Tech Stack

### Frontend (client/)

- **Framework**: SvelteKit 2.x with Svelte 5.x
- **Language**: TypeScript
- **Package Manager**: pnpm (always use `pnpm` commands, never npm/yarn)
- **UI Library**: shadcn-svelte components with bits-ui primitives
- **Styling**: TailwindCSS 4.x with custom animations
- **Icons**: Lucide Svelte
- **Testing**: Vitest with Testing Library
- **Build Tool**: Vite
- **Linting**: ESLint with Svelte plugin

### Backend (server/)

- **Language**: Rust
- **Framework**: Axum for HTTP and WebSocket handling
- **Async Runtime**: Tokio
- **Serialization**: Serde with JSON
- **Logging**: Tracing
- **Build Tool**: Cargo

### Development Tools

- **Container**: Docker with docker-compose
- **Build System**: Makefile for common tasks
- **WebSockets**: Real-time communication between client and server

## Project Structure

```
tinyretro/
├── client/          # SvelteKit frontend
│   ├── src/
│   │   ├── lib/     # Reusable components and utilities
│   │   │   ├── components/  # UI components
│   │   │   └── hooks/       # Custom hooks
│   │   └── routes/  # SvelteKit routes
│   └── static/      # Static assets
└── server/          # Rust backend
    └── src/         # Rust source code
```

## Development Commands

### Client (Frontend)

- **Install**: `cd client && pnpm install`
- **Dev Server**: `make client-debug` or `cd client && pnpm run dev`
- **Build**: `make client-build` or `cd client && pnpm run build`
- **Test**: `make client-test` or `cd client && pnpm run test`
- **Test Coverage**: `make client-test-coverage` or `cd client && pnpm run test:coverage`
- **Lint**: `make client-lint` or `cd client && pnpm run lint`

### Server (Backend)

- **Debug**: `make server-debug` or `cd server && cargo run`
- **Build**: `make server-build` or `cd server && cargo build`
- **Test**: `make server-test` or `cd server && cargo test`
- **Lint**: `make server-lint` or `cd server && cargo clippy`

## Code Style Guidelines

### Frontend

- Use TypeScript for all new files
- Follow Svelte 5 runes syntax (`$state`, `$derived`, `$effect`)
- Use shadcn-svelte components when available
- Implement Tailwind classes with `clsx` or `tailwind-merge` for dynamic styles
- Use kebab-case for component files and directories
- Export components from `$lib/components` using barrel exports
- Test components with Vitest and Testing Library

### Backend

- Follow Rust naming conventions (snake_case for functions/variables, PascalCase for types)
- Use `tokio` for async operations
- Implement proper error handling with `Result<T, E>`
- Use `serde` for serialization/deserialization
- Structure handlers in separate modules
- Use `tracing` for logging instead of `println!`

## Key Features

- **Anonymous Contributions**: No user authentication required
- **Real-time Updates**: WebSocket connection for live collaboration
- **Persistence**: JSON file storage (with plans for SQLite and DynamoDB)
- **Responsive Design**: Mobile-friendly interface
- **Dark Mode**: Toggle between light and dark themes

## Configuration Files

- **package.json**: Frontend dependencies and scripts
- **Cargo.toml**: Rust dependencies and project metadata
- **components.json**: shadcn-svelte configuration
- **tailwind.config.ts**: TailwindCSS configuration
- **svelte.config.js**: SvelteKit configuration
- **vite.config.ts**: Vite build configuration
- **docker-compose.yml**: Container orchestration

## Important Notes

- SSR is disabled (`export const ssr = false` in routes)
- Use `pnpm` exclusively for package management
- Server doesn't support hot reload currently
- WebSocket connection handles real-time updates
- All UI components should be accessible and follow shadcn patterns
- Use Svelte 5 syntax with runes for reactivity
- Test all components and business logic
- Follow the existing file structure and naming conventions

## Common Patterns

- Components in `$lib/components/` with TypeScript
- Utilities in `$lib/utils.ts`
- State management with Svelte stores or runes
- WebSocket communication for real-time features
- Responsive design with Tailwind breakpoints
- Error handling with proper user feedback
- Loading states for async operations
